<div class="jumbotron">
  <h1><i class="fa fa-car"></i> Your Garage</h1>
  <p>Manage your vehicles here.</p>
</div>

<div class="row-fluid">
  <div class="pull-right" style="margin-bottom: 15px;">
    <%= link_to new_car_path, class: "btn btn-success btn-lg", data: {no_turbolink: true} do %>
      <i class="glyphicon glyphicon-plus"></i> Register New Car
    <% end %>
  </div>
</div>

<% if @cars.empty? %>
  <div class="well text-center">
    <h3>Your garage is empty!</h3>
    <p>Register your first car to start creating trips.</p>
    <%= link_to new_car_path, class: "btn btn-primary btn-lg", data: {no_turbolink: true} do %>
      <i class="glyphicon glyphicon-plus"></i> Register Your First Car
    <% end %>
  </div>
<% else %>
  <div class="row">
    <% @cars.each do |c| %>
      <div class="col-md-4 col-sm-6" style="margin-bottom: 20px;">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title"><strong><%= c.make %> <%= c.model %></strong></h3>
          </div>
          <div class="panel-body">
            <p><i class="glyphicon glyphicon-calendar"></i> <strong>Year:</strong> <%= c.year %></p>
            <p><i class="glyphicon glyphicon-user"></i> <strong>Seats:</strong> <%= c.seats %></p>
            <p><i class="glyphicon glyphicon-usd"></i> <strong>Cost per mile:</strong> <%= number_to_currency(c.cost_per_mile) %></p>
            <% trip_count = Trip.where(car_id: c.id).count %>
            <p><i class="glyphicon glyphicon-road"></i> <strong>Trips:</strong> <%= trip_count %></p>
          </div>
          <div class="panel-footer">
            <% if trip_count == 0 %>
              <%= link_to edit_car_path(id: c.id), class: "btn btn-info", data: {no_turbolink: true} do %>
                <i class="glyphicon glyphicon-pencil"></i> Edit
              <% end %>
              <%= link_to delete_car_path(id: c.id), method: "delete", data: {confirm: 'Are you sure you want to delete this car?'}, class: "btn btn-danger" do %>
                <i class="glyphicon glyphicon-trash"></i> Delete
              <% end %>
            <% else %>
              <span class="text-muted">Car has trips and cannot be modified</span>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
<% end %>
